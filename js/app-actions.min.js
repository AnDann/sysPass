var $jscomp={scope:{},findInternal:function(c,d,g){c instanceof String&&(c=String(c));for(var e=c.length,h=0;h<e;h++){var k=c[h];if(d.call(g,k,h,c))return{i:h,v:k}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[d]=g.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,d,g,e){if(d){g=$jscomp.global;c=c.split(".");for(e=0;e<c.length-1;e++){var h=c[e];h in g||(g[h]={});g=g[h]}c=c[c.length-1];e=g[c];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(g,c,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,g){return $jscomp.findInternal(this,c,g).v}},"es6-impl","es3");
sysPass.Actions=function(c){var d=c.log,g,e=function(a){a={actionId:a.actionId,itemId:"undefined"!==typeof a.itemId?a.itemId:0,isAjax:1};var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_getContent.php";b.type="html";b.addHistory=!0;b.data=a;c.appRequests().getActionCall(b,function(a){$("#content").html(a);c.setContentSize()})},h=function(a){d.info("updateItems");var b=$("#"+a.data("item-dst"))[0].selectize;b.clearOptions();b.load(function(b){var f=c.appRequests().getRequestOpts();f.url="/ajax/ajax_getItems.php";
f.method="get";f.data={sk:c.sk.get(),itemType:a.data("item-type")};c.appRequests().getActionCall(f,function(a){b(a.items)})})},k={logout:function(){var a=window.location.search;c.redirect(0<a.length?"index.php"+a+"&logout=1":"index.php?logout=1")},login:function(a){d.info("main:login");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_doLogin.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(b){switch(b.status){case 0:c.redirect(b.data.url);break;case 2:c.msg.out(b);a.find("input[type='text'],input[type='password']").val("");
a.find("input:first").focus();$("#mpass").prop("disabled",!1);$("#smpass").val("").show();break;default:c.msg.out(b),a.find("input[type='text'],input[type='password']").val(""),a.find("input:first").focus()}})},install:function(a){d.info("main:install");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_install.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(a){c.msg.out(a);0==a.status&&setTimeout(function(){c.redirect("index.php")},2E3)})},twofa:function(a){d.info("main:twofa");
var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_2fa.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(a){c.msg.out(a);0==a.status&&setTimeout(function(){c.redirect("index.php")},2E3)})},getUpdates:function(a){d.info("main:getUpdates");a=c.appRequests().getRequestOpts();a.type="html";a.method="get";a.timeout=1E4;a.url="/ajax/ajax_checkUpds.php";c.appRequests().getActionCall(a,function(a){$("#updates").html(a);"undefined"!==typeof componentHandler&&componentHandler.upgradeDom()},
function(){$("#updates").html("!")})}},m={show:function(a){d.info("account:show");e({actionId:a.data("action-id"),itemId:a.data("item-id")})},showHistory:function(a){d.info("account:showHistory");e({actionId:a["action-id"],itemId:a["item-id"]})},edit:function(a){d.info("account:edit");e({actionId:a.data("action-id"),itemId:a.data("item-id")})},"delete":function(a){d.info("account:delete");var b='<div id="alert"><p id="alert-text">'+c.config().LANG[3]+"</p></div>";alertify.okBtn(c.config().LANG[43]).cancelBtn(c.config().LANG[44]).confirm(b,
function(b){b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_accountSave.php";b.data={accountid:a.data("item-id"),actionId:a.data("action-id"),sk:c.sk.get()};c.appRequests().getActionCall(b,function(a){c.msg.out(a)})},function(a){a.preventDefault();alertify.error(c.config().LANG[44])})},showpass:function(a){d.info("account:showpass");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_accViewPass.php";b.data={accountid:a.data("item-id"),isHistory:a.data("history"),isAjax:1};c.appRequests().getActionCall(b,
function(a){if(10===a.status)doLogout();else{var b;$("<div></div>").dialog({modal:!0,title:c.config().LANG[47],width:"auto",open:function(){b=$(this);var f,d="";f='<button class="dialog-clip-user-button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" data-clipboard-target=".dialog-user-text"><span class="ui-button-icon-primary ui-icon ui-icon-clipboard"></span><span class="ui-button-text">'+c.config().LANG[33]+"</span></button>";var l='<button class="dialog-clip-pass-button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" data-clipboard-target=".dialog-pass-text"><span class="ui-button-icon-primary ui-icon ui-icon-clipboard"></span><span class="ui-button-text">'+
c.config().LANG[34]+"</span></button>",d=a.useimage,e='<p class="dialog-user-text">'+a.acclogin+"</p>";0===a.status?(0===d?d='<p class="dialog-pass-text">'+a.accpass+"</p>":(d='<img class="dialog-pass-text" src="data:image/png;base64,'+a.accpass+'" />',l=""),f=e+d+'<div class="dialog-buttons">'+f+l+"</div>"):(f='<span class="altTxtRed">'+a.description+"</span>",b.dialog("option","buttons",[{text:"Ok",icons:{primary:"ui-icon-close"},click:function(){b.dialog("close")}}]));b.html(f);b.dialog("option",
"position","center");b.parent().on("mouseleave",function(){clearTimeout(g);g=setTimeout(function(){b.dialog("close")},3E4)})},close:function(){clearTimeout(g);b.dialog("destroy")}})}})},copypass:function(a){d.info("account:copypass");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_accViewPass.php";b.async=!1;b.data={accountid:a.data("item-id"),isHistory:a.data("history"),isAjax:1};return c.appRequests().getActionCall(b)},copy:function(a){d.info("account:copy");e({actionId:a.data("action-id"),
itemId:a.data("item-id")})},savefavorite:function(a,b){d.info("account:saveFavorite");var f="on"===a.data("status"),l={actionId:f?a.data("action-id-off"):a.data("action-id-on"),accountId:a.data("item-id"),sk:c.sk.get(),isAjax:1},e=c.appRequests().getRequestOpts();e.url="/ajax/ajax_accFavorites.php";e.data=l;c.appRequests().getActionCall(e,function(d){c.msg.out(d);0===d.status&&(a.data("status",f?"off":"on"),"function"===typeof b&&b())})},request:function(a){d.info("account:request");var b=c.appRequests().getRequestOpts();
b.url="/ajax/ajax_sendRequest.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(a){c.msg.out(a)})},menu:function(a){a.hide();a.parent().children(".actions-optional").show(250)},sort:function(a){d.info("account:sort");var c=$("#frmSearch");c.find('input[name="skey"]').val(a.data("key"));c.find('input[name="sorder"]').val(a.data("dir"));c.find('input[name="start"]').val(a.data("start"));m.search()},editpass:function(a){d.info("account:editpass");e({actionId:a.data("action-id"),itemId:a.data("item-id")})},
restore:function(a){d.info("account:restore");e({actionId:a.data("action-id"),itemId:a.data("item-id")})},getfiles:function(a){d.info("account:getfiles");var b=c.appRequests().getRequestOpts();b.method="get";b.type="html";b.url="/ajax/ajax_accGetFiles.php";b.data={id:a.data("item-id"),del:a.data("delete"),sk:c.sk.get()};c.appRequests().getActionCall(b,function(c){a.html(c)})},search:function(a){d.info("account:search");var b=$("#frmSearch");!0===a&&(b.find("select").each(function(){$(this)[0].selectize.clear()}),
b.find('input[name="search"]').val(""),b.find('input[name="start"], input[name="skey"], input[name="sorder"]').val(0),b.find('input[name="searchfav"]').val(0).change());a=c.appRequests().getRequestOpts();a.url="/ajax/ajax_accSearch.php";a.data=b.serialize();c.appRequests().getActionCall(a,function(a){"undefined"!==typeof a.sk&&(c.sk.set(a.sk),b.find('input[name="sk"]').val(a.sk));$("#res-content").html(a.html)})},save:function(a){d.info("account:save");var b=c.appRequests().getRequestOpts();b.url=
"/ajax/ajax_accSave.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(a){c.msg.out(a)})}};return{doAction:e,appMgmt:{show:function(a){d.info("appMgmt:show");var b=c.appRequests().getRequestOpts();b.type="html";b.url="/ajax/ajax_appMgmtData.php";b.data={itemId:a.data("item-id"),actionId:a.data("action-id"),activeTab:a.data("activetab"),sk:c.sk.get(),isAjax:1};c.appRequests().getActionCall(b,function(b){$.fancybox(b,{padding:[0,10,10,10],afterClose:function(){a.data("item-dst")&&h(a)},
beforeShow:function(){c.appTriggers().views.common("#fancyContainer")}})})},"delete":function(a){d.info("appMgmt:delete");var b='<div id="alert"><p id="alert-text">'+c.config().LANG[12]+"</p></div>";alertify.okBtn(c.config().LANG[43]).cancelBtn(c.config().LANG[44]).confirm(b,function(b){b.preventDefault();b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_appMgmtSave.php";b.data={itemId:a.data("item-id"),actionId:a.data("action-id"),sk:c.sk.get(),isAjax:1};c.appRequests().getActionCall(b,function(b){c.msg.out(b);
a.data("nextaction-id")&&e({actionId:a.data("nextaction-id"),itemId:a.data("activetab")})})},function(a){a.preventDefault();c.msg.error(c.config().LANG[44])})},save:function(a){d.info("appMgmt:save");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_appMgmtSave.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(b){c.msg.out(b);0===b.status&&(a.data("nextaction-id")&&a.data("activetab")&&e({actionId:a.data("nextaction-id"),itemId:a.data("activetab")}),$.fancybox.close())})},
search:function(a){d.info("appMgmt:search");var b=$(a),f=b.find("[name=target]").val();a=c.appRequests().getRequestOpts();a.url="/ajax/ajax_appMgmtSearch.php";a.data=b.serialize();c.appRequests().getActionCall(a,function(a){var d=$("#"+f);0===a.status?(d.html(a.html),b.find("[name='sk']").val(a.sk)):d.html(c.msg.html.error(a.description))});return!1},nav:function(a){d.info("appMgmt:nav");var b=$("#"+a.data("action-form")),f=c.appRequests().getRequestOpts();f.url="/ajax/ajax_appMgmtSearch.php";f.data=
b.serialize()+"&start="+a.data("start")+"&count="+a.data("count");c.getActionCall(f,function(a){var f=$("#"+b.find("[name=target]").val());0===a.status?(f.html(a.html),b.find("[name='sk']").val(a.sk)):f.html(c.msg.html.error(a.description))});return!1}},account:m,file:{view:function(a){d.info("file:view");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_files.php";b.type="html";b.data={fileId:a.data("item-id"),sk:c.sk.get(),actionId:a.data("action-id")};c.appRequests().getActionCall(b,function(a){"undefined"!==
typeof a.status&&1===a.status?c.msg.out(a):a?($.fancybox(a,{padding:[10,10,10,10]}),setTimeout(function(){$.fancybox.update()},1E3)):c.msg.error(c.config().LANG[14])})},download:function(a){d.info("file:download");a={fileId:a.data("item-id"),sk:c.sk.get(),actionId:a.data("action-id")};$.fileDownload(c.config().APP_ROOT+"/ajax/ajax_files.php",{httpMethod:"POST",data:a})},"delete":function(a){d.info("file:delete");var b='<div id="alert"><p id="alert-text">'+c.config().LANG[15]+"</p></div>";alertify.okBtn(c.config().LANG[43]).cancelBtn(c.config().LANG[44]).confirm(b,
function(b){b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_files.php";b.data={fileId:a.data("item-id"),actionId:a.data("action-id"),sk:c.sk.get()};c.appRequests().getActionCall(b,function(a){c.msg.out(a);0===a.status&&(a=$("#list-account-files"),m.getfiles(a))})},function(a){a.preventDefault();alertify.error(c.config().LANG[44])})}},checks:{ldap:function(a){d.info("checks:ldap");a=$(a.data("src"));var b=a.find("[name='ldap_bindpass']").val();a={type:"ldap",ldap_server:a.find("[name='ldap_server']").val(),
ldap_base:a.find("[name='ldap_base']").val(),ldap_group:a.find("[name='ldap_group']").val(),ldap_binduser:a.find("[name='ldap_binduser']").val(),ldap_bindpass:""!==c.config().PK?c.config().crypt.encrypt(b):b,sk:c.sk.get(),isAjax:1};b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_checkConnection.php";b.data=a;c.appRequests().getActionCall(b,function(a){c.msg.out(a)})},wiki:function(a){d.info("checks:wiki");a=$(a.data("src"));a={type:"dokuwiki",dokuwiki_url:a.find("[name='dokuwiki_url']").val(),
dokuwiki_user:a.find("[name='dokuwiki_user']").val(),dokuwiki_pass:a.find("[name='dokuwiki_pass']").val(),isAjax:1,sk:c.sk.get()};var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_checkConnection.php";b.data=a;c.appRequests().getActionCall(b,function(a){c.msg.out(a);0===a.status&&$("#dokuWikiResCheck").html(a.data)})}},config:{save:function(a){d.info("config:save");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_configSave.php";b.data=a.serialize();c.appRequests().getActionCall(b,
function(b){c.msg.out(b);0===b.status&&"undefined"!==typeof a.data("nextaction-id")&&e({actionId:a.data("nextaction-id"),itemId:a.data("activetab")})})},backup:function(a){d.info("config:backup");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_export.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(b){c.msg.out(b);0===b.status&&"undefined"!==typeof a.data("nextaction-id")&&e({actionId:a.data("nextaction-id"),itemId:a.data("activetab")})})},"export":function(a){d.info("config:export");
var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_export.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(b){c.msg.out(b);0===b.status&&"undefined"!==typeof a.data("nextaction-id")&&e({actionId:a.data("nextaction-id"),itemId:a.data("activetab")})})},"import":function(a){d.info("config:import");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_import.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(b){c.msg.out(b);0===b.status&&"undefined"!==typeof a.data("nextaction-id")&&
e({actionId:a.data("nextaction-id"),itemId:a.data("activetab")})})}},main:k,user:{savePreferences:function(a){d.info("user:savePreferences");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_userPrefsSave.php";b.data=a.serialize();c.appRequests().getActionCall(b,function(a){c.msg.out(a);setTimeout(function(){window.location.replace("index.php")},2E3)})},saveSecurity:function(a){d.info("user:saveSecurity");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_userPrefsSave.php";b.data=a.serialize();
c.appRequests().getActionCall(b,function(a){c.msg.out(a)})},password:function(a){d.info("user:password");var b=c.appRequests().getRequestOpts();b.type="html";b.method="get";b.url="/ajax/ajax_usrpass.php";b.data={actionId:a.data("action-id"),userId:a.data("item-id"),sk:a.data("sk"),isAjax:1};c.appRequests().getActionCall(b,function(a){0===a.length?k.logout():$.fancybox(a,{padding:0})})},passreset:function(a){d.info("user:passreset");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_passReset.php";
b.data=a.serialize();c.appRequests().getActionCall(b,function(a){c.msg.out(a)})}},link:{save:function(a){d.info("link:save");var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_appMgmtSave.php";b.data={itemId:a.data("item-id"),actionId:a.data("action-id"),sk:c.sk.get(),isAjax:1};alertify.okBtn(c.config().LANG[40]).cancelBtn(c.config().LANG[41]).confirm(c.config().LANG[48],function(a){a.preventDefault();b.data.notify=1;c.appRequests().getActionCall(b,function(a){c.msg.out(a)})},function(a){a.preventDefault();
c.appRequests().getActionCall(b,function(a){c.msg.out(a)})})},refresh:function(a){d.info("link:refresh");a={itemId:a.data("item-id"),actionId:a.data("action-id"),sk:c.sk.get(),activeTab:a.data("activetab")};var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_appMgmtSave.php";b.data=a;c.appRequests().getActionCall(b,function(a){c.msg.out(a)})}},eventlog:{nav:function(a){if("undefined"===typeof a.data("start"))return!1;var b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_eventlog.php";b.type=
"html";b.data={start:a.data("start"),current:a.data("current")};c.appRequests().getActionCall(b,function(a){$("#content").html(a);c.scrollUp()})},clear:function(a){var b='<div id="alert"><p id="alert-text">'+c.config().LANG[20]+"</p></div>";alertify.okBtn(c.config().LANG[43]).cancelBtn(c.config().LANG[44]).confirm(b,function(b){b.preventDefault();b=c.appRequests().getRequestOpts();b.url="/ajax/ajax_eventlog.php";b.data={clear:1,sk:c.sk.get(),isAjax:1};c.appRequests().getActionCall(b,function(b){c.msg.out(b);
0==b.status&&e({actionId:a.data("nextaction-id")})})},function(a){a.preventDefault();c.msg.error(c.config().LANG[44])})}}}};
