var $jscomp={scope:{},findInternal:function(b,e,c){b instanceof String&&(b=String(b));for(var g=b.length,f=0;f<g;f++){var a=b[f];if(e.call(c,a,f,b))return{i:f,v:a}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[e]=c.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,e,c,g){if(e){c=$jscomp.global;b=b.split(".");for(g=0;g<b.length-1;g++){var f=b[g];f in c||(c[f]={});c=c[f]}b=b[b.length-1];g=c[b];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6-impl","es3");
sysPass.Triggers=function(b){var e=b.log,c=function(a){var d={valueField:"id",labelField:"name",searchField:["name"]};a.find(".select-box").each(function(a){a=$(this);d.plugins=a.hasClass("select-box-deselect")?{clear_selection:{title:b.config().LANG[51]}}:{};if(a.data("onchange")){var c=a.data("onchange").split("/"),h=a.data("action-id");d.onChange=function(a){var b={"action-id":h,"item-id":a};if(0<a)if(2===c.length)sysPassApp.actions()[c[0]][c[1]](b);else sysPassApp.actions()[c[0]](b)}}a.selectize(d)});
a.find("#allowed_exts").selectize({create:function(a){return{value:a.toUpperCase(),text:a.toUpperCase()}},createFilter:/^[a-z0-9]{1,4}$/i,plugins:["remove_button"]});a.find("#wikifilter").selectize({create:!0,createFilter:/^[a-z0-9._-]+$/i,plugins:["remove_button"]})},g=function(){var a=$("#actionsBar"),b=$("#actionsBar #actionsBar-logo img"),c=!1,e={position:"fixed",top:0,left:a.offset().left,width:a.width(),padding:"1em 0",backgroundColor:"rgba(255, 255, 255, .75)",borderBottom:"1px solid #ccc"};
$(window).scroll(function(){var d=$(this).scrollTop()>a.height();d&&!c?(a.css(e),b.show().css({opacity:.75}),c=!0):!d&&c&&(a.css({backgroundColor:"transparent",border:"0"}),b.hide(),c=!1)});0<a.offset().top&&(a.css(e),b.show().css({opacity:.75}),c=!0)},f=function(a){var d=a.data("onsubmit").split("/"),c=b.appActions(),e=a.attr("data-hash"),f=SparkMD5.hash(a.serialize(),!1);if(e===f)return b.resMsg("ok",b.config().LANG[55]),!1;a.find("input[name='sk']").val(b.sk.get());if(2===d.length)c[d[0]][d[1]](a);
else c[d[0]](a)};return{views:{main:function(){$(".btn-menu").click(function(){"1"===$(this).attr("data-history-reset")&&b.appRequests().history.reset();b.appActions().doAction({actionId:$(this).data("action-id")})});$("body").on("click",".btn-action[data-onclick],.btn-action-pager[data-onclick]",function(){var a=$(this),d=a.data("onclick").split("/"),c=b.appActions();if(2===d.length)c[d[0]][d[1]](a);else c[d[0]](a)}).on("click",".btn-back",function(){var a=b.appRequests();if(0<a.history.length()){e.info("back");
var d=a.history.del();a.getActionCall(d,d.callback)}}).on("submit",".form-action",function(a){a.preventDefault();f($(this))}).on("click",".btn-help",function(){var a=$(this);$("#"+a.data("help")).dialog("open")});g();b.appActions().doAction({actionId:1})},search:function(){var a=$("#frmSearch");a.on("submit",function(a){a.preventDefault();b.appActions().account.search()});a.find("select, #rpp").on("change",function(){b.appActions().account.search()});a.find("#btnClear").click(function(){b.appActions().account.search(!0)});
a.find("input:text:visible:first").focus();$("#chkgsearch").click(function(){var d=1==$(this).prop("checked")?1:0;a.find("input[name='gsearch']").val(d);b.appActions().account.search()});"function"===typeof b.appTheme().viewsTriggers.search&&b.appTheme().viewsTriggers.search()},login:function(){$("#frmLogin").on("submit",function(a){a.preventDefault();f($(this))});$("#boxLogout").fadeOut(1500,function(){location.href=b.config().APP_ROOT+"/index.php"})},footer:function(){$("#btnLogout").click(function(a){b.appActions().main.logout()});
$("#btnPrefs").click(function(a){b.appActions().doAction({actionId:$(this).data("action-id")})});$("#btnUserPass").click(function(a){b.appActions().appMgmt.userpass($(this))})},common:function(a){a=$(a);c(a);a.find(".help-box").dialog({autoOpen:!1,title:b.config().LANG[54],width:screen.width/2.5});"function"===typeof b.appTheme().viewsTriggers.common&&b.appTheme().viewsTriggers.common(a)},datatabs:function(a){$("#tabs").tabs({active:a});$(".datagrid-action-search>form").each(function(){var a=$(this);
a.find("i.btn-clear").on("click",function(){a.trigger("reset").submit()})})},config:function(){var a=$("#drop-import-files");if(0<a.length){var c=b.fileUpload(a);c.url="/ajax/ajax_import.php";c.beforeSendAction=function(){c.requestData({sk:b.sk.get(),csvDelimiter:$("#csvDelimiter").val(),importPwd:$("#importPwd").val(),import_defaultuser:$("#import_defaultuser").val(),import_defaultgroup:$("#import_defaultgroup").val()})}}a=$(".form-action");0<a.length&&a.each(function(){var a=$(this);"undefined"!==
typeof a.attr("data-hash")&&a.attr("data-hash",SparkMD5.hash(a.serialize(),!1))})},account:function(){var a=$("#list-account-files");0<a.length&&b.appActions().account.getfiles(a);var c=$("#drop-account-files");0<c.length&&(c=b.fileUpload(c),c.url="/ajax/ajax_files.php",c.requestDoneAction=function(){b.appActions().account.getfiles(a)});c=$(".form-action");0<c.length&&c.attr("data-hash",SparkMD5.hash(c.serialize(),!1))}},selectDetect:c,updateSk:function(){$("#content").find("[data-sk]").each(function(){e.info("updateSk");
$(this).data("sk",b.sk.get())})}}};
