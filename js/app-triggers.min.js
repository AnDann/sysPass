var $jscomp={scope:{},findInternal:function(b,c,e){b instanceof String&&(b=String(b));for(var f=b.length,a=0;a<f;a++){var d=b[a];if(c.call(e,d,a,b))return{i:a,v:d}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=e.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,c,e,f){if(c){e=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var a=b[f];a in e||(e[a]={});e=e[a]}b=b[b.length-1];f=e[b];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6-impl","es3");
sysPass.Triggers=function(b){var c=b.log,e=function(a){var d={valueField:"id",labelField:"name",searchField:["name"]};a.find(".select-box").each(function(a){var c=$(this);d.plugins=c.hasClass("select-box-deselect")?{clear_selection:{title:b.config().LANG[51]}}:{};if(c.data("onchange")){var e=c.data("onchange").split("/");d.onChange=function(a){if(0<a)if(2===e.length)sysPassApp.actions()[e[0]][e[1]](c);else sysPassApp.actions()[e[0]](c)}}c.selectize(d)});a.find("#allowed_exts").selectize({create:function(a){return{value:a.toUpperCase(),
text:a.toUpperCase()}},createFilter:/^[a-z0-9]{1,4}$/i,plugins:["remove_button"]});a.find("#wikifilter").selectize({create:!0,createFilter:/^[a-z0-9._-]+$/i,plugins:["remove_button"]})},f=function(){c.info("bodyHooks");$("body").on("click",".btn-action[data-onclick],.btn-action-pager[data-onclick]",function(){var a=$(this),d=a.data("onclick").split("/"),c=b.appActions();if(2===d.length)c[d[0]][d[1]](a);else c[d[0]](a)}).on("click",".btn-back",function(){var a=b.appRequests();if(0<a.history.length()){c.info("back");
var d=a.history.del();a.getActionCall(d,d.callback)}}).on("submit",".form-action",function(a){a.preventDefault();a=$(this);c.info("formAction");var d=a.data("onsubmit").split("/"),e=b.appActions(),f=a.attr("data-hash"),g=SparkMD5.hash(a.serialize(),!1);if(f===g)b.msg.ok(b.config().LANG[55]);else if(a.find("input[name='sk']").val(b.sk.get()),2===d.length)e[d[0]][d[1]](a);else e[d[0]](a)}).on("click",".btn-help",function(){var a=$(this);$("#"+a.data("help")).dialog("open")}).on("reset",".form-action",
function(a){a.preventDefault();c.info("reset");a=$(this);a.find("input:text, input:password, input:file, textarea").val("").parent("div").removeClass("is-dirty");a.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected");a.find("input[name='start'], input[name='skey'], input[name='sorder']").val(0);a.find("select").each(function(){$(this)[0].selectize.clear(!0)});a.submit()})};return{views:{main:function(){c.info("views:main");f();$(".btn-menu").click(function(){"1"===$(this).attr("data-history-reset")&&
b.appRequests().history.reset();b.appActions().doAction({actionId:$(this).data("action-id")})});b.appActions().doAction({actionId:1})},search:function(){c.info("views:search");var a=$("#frmSearch");a.find("select, #rpp").on("change",function(){a.submit()});a.find("button.btn-clear").on("click",function(b){b.preventDefault();a.find('input[name="searchfav"]').val(0);a[0].reset()});a.find("input:text:visible:first").focus();$("#chkgsearch").click(function(){var b=1==$(this).prop("checked")?1:0;a.find("input[name='gsearch']").val(b);
a.submit()});"function"===typeof b.appTheme().viewsTriggers.search&&b.appTheme().viewsTriggers.search()},login:function(){c.info("views:login");f();$("#boxLogout").fadeOut(1500,function(){location.href=b.config().APP_ROOT+"/index.php"})},twofa:function(){c.info("views:twofa");f()},passreset:function(){c.info("views:passreset");f()},footer:function(){c.info("views:footer");$("#btnLogout").click(function(a){b.appActions().main.logout()});$("#btnPrefs").click(function(a){b.appActions().doAction({actionId:$(this).data("action-id")})})},
common:function(a){c.info("views:common");a=$(a);e(a);a.find(".help-box").dialog({autoOpen:!1,title:b.config().LANG[54],width:screen.width/2.5});"function"===typeof b.appTheme().viewsTriggers.common&&b.appTheme().viewsTriggers.common(a)},datatabs:function(a){c.info("views:datatabs");$(".datagrid-action-search>form").each(function(){var a=$(this);a.find("button.btn-clear").on("click",function(b){b.preventDefault();a.trigger("reset")})})},config:function(){c.info("views:config");var a=$("#drop-import-files");
if(0<a.length){var d=b.fileUpload(a);d.url=b.appActions().ajaxUrl.config["import"];d.beforeSendAction=function(){d.requestData({sk:b.sk.get(),csvDelimiter:$("#csvDelimiter").val(),importPwd:$("#importPwd").val(),import_defaultuser:$("#import_defaultuser").val(),import_defaultgroup:$("#import_defaultgroup").val()})}}a=$(".form-action");0<a.length&&a.each(function(){var a=$(this);"undefined"!==typeof a.attr("data-hash")&&a.attr("data-hash",SparkMD5.hash(a.serialize(),!1))})},account:function(){c.info("views:account");
var a=$("#list-account-files");0<a.length&&b.appActions().account.getfiles(a);var d=$("#drop-account-files");0<d.length&&(d=b.fileUpload(d),d.url=b.appActions().ajaxUrl.file,d.requestDoneAction=function(){b.appActions().account.getfiles(a)});d=$(".form-action");0<d.length&&d.attr("data-hash",SparkMD5.hash(d.serialize(),!1))},install:function(){c.info("views:install");f();var a=$("#frmInstall");b.appTheme().passwordDetect(a)}},selectDetect:e,updateSk:function(){$("#content").find("[data-sk]").each(function(){c.info("updateSk");
$(this).data("sk",b.sk.get())})}}};
