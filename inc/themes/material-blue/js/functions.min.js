sysPass.Util.Theme=function(e){var g=sysPass.Util.Common;var h=g.passwordData;var f=g.APP_ROOT;var a=g.LANG;var k=g.PK;var c=function(){e("#wrap-loading").show();e("#loading").addClass("is-active")};var l=function(){e("#wrap-loading").hide();e("#loading").removeClass("is-active")};var i=function(){e(".active-tooltip").tooltip({content:function(){return e(this).attr("title")},tooltipClass:"tooltip"})};var j=function(o,t,m,v){var q=0,u="",s;while(q<h.complexity.numlength){s=(Math.floor((Math.random()*100))%94)+33;if(!h.complexity.symbols){if((s>=33)&&(s<=47)){continue}if((s>=58)&&(s<=64)){continue}if((s>=91)&&(s<=96)){continue}if((s>=123)&&(s<=126)){continue}}if(!h.complexity.numbers&&s>=48&&s<=57){continue}if(!h.complexity.uppercase&&s>=65&&s<=90){continue}q++;u+=String.fromCharCode(s)}if(m===true){e("#viewPass").attr("title",u)}else{alertify.alert('<div id="alert"><p id="alert-text">'+a[6]+'</p><p id="alert-pass"> '+u+"</p>")}var n=zxcvbn(u);h.passLength=u.length;if(v){var r=e("#"+v).parent();g.outputResult(n.score,v);var p=new MaterialTextfield();r.find("input:password").val(u);r.addClass(p.CssClasses_.IS_DIRTY).removeClass(p.CssClasses_.IS_INVALID);e("#"+v+"R").val(u).parent().addClass(p.CssClasses_.IS_DIRTY).removeClass(p.CssClasses_.IS_INVALID);sysPassUtil.Common.encryptFormValue("#"+v+"R");r.find("#passLevel").show(500)}else{g.outputResult(n.score);e("input:password, input.password").val(u);e("#passLevel").show(500)}};var b=function(){e("<div></div>").dialog({modal:true,title:a[29],width:"400px",open:function(){var m=e(this);var n='<label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-numbers"><input type="checkbox" id="checkbox-numbers" class="mdl-checkbox__input" name="checkbox-numbers"/><span class="mdl-checkbox__label">'+a[35]+'</span></label><label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-uppercase"><input type="checkbox" id="checkbox-uppercase" class="mdl-checkbox__input" name="checkbox-uppercase"/><span class="mdl-checkbox__label">'+a[36]+'</span></label><label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-symbols"><input type="checkbox" id="checkbox-symbols" class="mdl-checkbox__input" name="checkbox-symbols"/><span class="mdl-checkbox__label">'+a[37]+'</span></label><div class="mdl-textfield mdl-js-textfield textfield-passlength"><input class="mdl-textfield__input" type="number" pattern="[0-9]*" id="passlength" /><label class="mdl-textfield__label" for="passlength">'+a[38]+'</label></div><button id="btn-complexity" class="mdl-button mdl-js-button mdl-button--raised">Ok</button>';m.html(n);m.dialog("option","position","center");m.ready(function(){e("#checkbox-numbers").prop("checked",h.complexity.numbers);e("#checkbox-uppercase").prop("checked",h.complexity.uppercase);e("#checkbox-symbols").prop("checked",h.complexity.symbols);e("#passlength").val(h.complexity.numlength);e("#btn-complexity").click(function(){h.complexity.numbers=e(" #checkbox-numbers").is(":checked");h.complexity.uppercase=e("#checkbox-uppercase").is(":checked");h.complexity.symbols=e("#checkbox-symbols").is(":checked");h.complexity.numlength=parseInt(e("#passlength").val());m.dialog("close")});componentHandler.upgradeDom()})},close:function(){e(this).dialog("destroy")}})};var d=function(){e(".passwordfield__input").each(function(){var n=e(this).parent();var m=e(this).attr("id");if(n.next().hasClass("password-actions")){return}var o='<button id="menu-speed-'+m+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" title="'+a[27]+'"><i class="material-icons">more_vert</i></button>';o+='<ul class="mdl-menu mdl-js-menu" for="menu-speed-'+m+'">';o+='<li class="mdl-menu__item passGen" data-targetid="'+m+'"><i class="material-icons">settings</i>'+a[28]+"</li>";o+='<li class="mdl-menu__item passComplexity" data-targetid="'+m+'"><i class="material-icons">vpn_key</i>'+a[29]+"</li>";o+='<li class="mdl-menu__item reset" data-targetid="'+m+'"><i class="material-icons">refresh</i>'+a[30]+"</li>";n.after('<div class="password-actions" />');n.next(".password-actions").prepend('<span class="passLevel passLevel-'+m+' fullround" title="'+a[31]+'"></span>').prepend('<i class="showpass material-icons" title="'+a[32]+'" data-targetid="'+m+'">remove_red_eye</i>').prepend(o);e(this).on("keyup",function(){g.checkPassLevel(e(this).val(),m)})});e(".passwordfield__input-show").each(function(){var n=e(this).parent();var m=e(this).attr("id");n.after('<i class="showpass material-icons" title="'+a[32]+'" data-targetid="'+m+'">remove_red_eye</i>')});e(".passGen").on("click",function(){var m=e(this).data("targetid");j(11,true,true,m);e("#"+m).focus()});e(".passComplexity").on("click",function(){b()});e(".showpass").on("mouseover",function(){var m=e(this).data("targetid");e(this).attr("title",e("#"+m).val())});e(".reset").on("click",function(){var m=e(this).data("targetid");e("#"+m).val("");e("#"+m+"R").val("");componentHandler.upgradeDom()})};return{showLoading:c,hideLoading:l,activeTooltip:i,passwordDetect:d,password:j,init:function(){jQuery.extend(jQuery.fancybox.defaults,{type:"ajax",autoWidth:true,autoHeight:true,autoResize:true,autoCenter:true,fitToView:false,minHeight:50,padding:0,helpers:{overlay:{css:{background:"rgba(0, 0, 0, 0.1)"}}},keys:{close:[27]},afterShow:function(){e("#fancyContainer").find("input:visible:first").focus()}});jQuery.ajaxSetup({beforeSend:function(){c()},complete:function(){l();componentHandler.upgradeDom();i()}});e(document).ready(function(){i()})},Common:g}}(jQuery);var sysPassUtil=sysPass.Util.Theme;sysPassUtil.init();