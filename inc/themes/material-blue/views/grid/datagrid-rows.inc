<?php
/**
 * @var $data  SP\Html\DataGrid\DataGridTab
 * @var $this  SP\Core\Template
 */
?>

    <!-- Rows -->
<?php if ($data->getData()->getDataCount() === 0): ?>
    <tr>
        <td>
            <?php echo _('No se encontraron registros'); ?>
        </td>
    </tr>
<?php else: ?>
    <?php foreach ($data->getData()->getData() as $dataIndex => $dataItem): ?>
        <?php if ($dataIndex === 'count'): continue; endif; ?>
        <tr data-item-id="<?php echo $dataItem->{$data->getData()->getDataRowSourceId()}; ?>"
            data-activetab="<?php echo $index; ?>">
            <?php foreach ($data->getData()->getDataRowSources() as $rowSrc): ?>
                <td class="cell-data"><?php echo ($dataItem->{$rowSrc} !== '') ? $dataItem->{$rowSrc} : '&nbsp;'; // Fix height ?></td>
            <?php endforeach; ?>

            <?php if (count($data->getData()->getDataRowSourcesWithIcon()) > 0): ?>
                <td class="cell-nodata">
                    <?php foreach ($data->getData()->getDataRowSourcesWithIcon() as $rowSrcIcon): ?>
                        <?php if ($dataItem->{$rowSrcIcon[0]} == 1): ?>
                            <i class="material-icons <?php echo $rowSrcIcon[1]->getClass(); ?>"
                               title="<?php echo $rowSrcIcon[1]->getTitle(); ?>"><?php echo $rowSrcIcon[1]->getIcon(); ?>
                            </i>
                        <?php else: ?>
                            &nbsp;
                        <?php endif; ?>
                    <?php endforeach; ?>
                </td>
            <?php endif; ?>

            <td class="cell-actions">
                <div>
                    <?php if (count($data->getDataActions()) > 0): ?>
                        <?php foreach ($data->getDataActions() as $action): ?>
                            <?php if (!$action->isSkip()): ?>
                                <?php if ($action->getFilterRowSource() && $dataItem->{$action->getFilterRowSource()} == 1): continue; endif; ?>
                                <i id="btn-action-<?php echo $dataItem->{$data->getData()->getDataRowSourceId()}, '-', $action->getId(); ?>"
                                   class="btn-action material-icons <?php echo $action->getIcon()->getClass(); ?>"
                                   data-action-id="<?php echo $action->getId(); ?>"
                                   data-nextaction-id="<?php echo $actionId; ?>"
                                   data-item-id="<?php echo $dataItem->{$data->getData()->getDataRowSourceId()}; ?>"
                                   data-activetab="<?php echo $index; ?>"
                                   data-onclick="<?php echo $action->getOnClick(); ?>"><?php echo $action->getIcon()->getIcon(); ?></i>
                                <span
                                    for="btn-action-<?php echo $dataItem->{$data->getData()->getDataRowSourceId()}, '-', $action->getId(); ?>"
                                    class="mdl-tooltip mdl-tooltip--top"><?php echo $action->getTitle(); ?></span>
                            <?php endif; ?>
                        <?php endforeach; ?>
                    <?php else: ?>
                        &nbsp;
                    <?php endif; ?>
                </div>
            </td>
        </tr>
    <?php endforeach; ?>
<?php endif; ?>