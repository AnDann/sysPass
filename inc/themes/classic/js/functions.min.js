sysPass.Util.Theme=function(e){var g=sysPass.Util.Common;var h=g.passwordData;var f=g.APP_ROOT;var a=g.LANG;var k=g.PK;var c=function(){if(document.getElementById("wrap-loading")!==null){e("#wrap-loading").show();e("#loading").addClass("is-active")}else{e.fancybox.showLoading()}};var l=function(){if(document.getElementById("wrap-loading")!==null){e("#wrap-loading").hide();e("#loading").removeClass("is-active")}else{e.fancybox.hideLoading()}};var i=function(){e(".active-tooltip").tooltip({content:function(){return e(this).attr("title")},tooltipClass:"tooltip"});e(".help-tooltip").tooltip({content:function(){return e(this).next("div").html()},tooltipClass:"tooltip"})};var j=function(s,p,m,o){var r=0,n="",q;while(r<h.complexity.numlength){q=(Math.floor((Math.random()*100))%94)+33;if(!h.complexity.symbols){if((q>=33)&&(q<=47)){continue}if((q>=58)&&(q<=64)){continue}if((q>=91)&&(q<=96)){continue}if((q>=123)&&(q<=126)){continue}}if(!h.complexity.numbers&&q>=48&&q<=57){continue}if(!h.complexity.uppercase&&q>=65&&q<=90){continue}r++;n+=String.fromCharCode(q)}if(m===true){e("#viewPass").attr("title",n)}else{alertify.alert('<div id="alert"><p id="alert-text">'+a[6]+'</p><p id="alert-pass"> '+n+"</p>")}var t=zxcvbn(n);h.passLength=n.length;if(o){g.outputResult(t.score,o);e("#"+o).val(n);e("#"+o+"R").val(n);sysPassUtil.Common.encryptFormValue("#"+o+"R");e("#"+o).focus()}else{g.outputResult(t.score,o);e("input:password, input.password").val(n);e("#passLevel").show(500)}};var b=function(){e('<div id="dialog-complexity"></div>').dialog({modal:true,title:a[29],width:"450px",open:function(){var m=e(this);var n='<div class="dialog-btns-complexity"><label for="checkbox-numbers">'+a[35]+'</label><input type="checkbox" id="checkbox-numbers" name="checkbox-numbers"/><label for="checkbox-uppercase">'+a[36]+'</label><input type="checkbox" id="checkbox-uppercase" name="checkbox-uppercase"/><label for="checkbox-symbols">'+a[37]+'</label><input type="checkbox" id="checkbox-symbols" name="checkbox-symbols"/></div><div class="dialog-length-complexity"><label for="passlength">'+a[38]+'</label><input class="inputNumber" pattern="[0-9]*" id="passlength" /></div><div class="dialog-buttons"><button class="btnDialogOk">Ok</button></div>';m.html(n);m.dialog("option","position","center");m.ready(function(){e("#checkbox-numbers").prop("checked",h.complexity.numbers);e("#checkbox-uppercase").prop("checked",h.complexity.uppercase);e("#checkbox-symbols").prop("checked",h.complexity.symbols);e("#passlength").val(h.complexity.numlength);e(".dialog-btns-complexity").buttonset({icons:{primary:"ui-icon-transferthick-e-w"}});e(".inputNumber").spinner();e(".btnDialogOk").button().click(function(){h.complexity.numbers=e(" #checkbox-numbers").is(":checked");h.complexity.uppercase=e("#checkbox-uppercase").is(":checked");h.complexity.symbols=e("#checkbox-symbols").is(":checked");h.complexity.numlength=parseInt(e("#passlength").val());m.dialog("close")})})},close:function(){e(this).dialog("destroy")}})};var d=function(){e(".passwordfield__input").each(function(){var o=e(this);var m=e(this).attr("id");if(o.next().hasClass("password-actions")){return}var n='<div><button type="button" class="quickGenPass" data-targetid="'+m+'">'+a[28]+"</button>";n+='<button type="button" class="genPassActions">'+a[27]+"</button></div>";n+="<ul>";n+='<li data-targetid="'+m+'" class="passGen">'+a[28]+"</li>";n+='<li data-targetid="'+m+'" class="passComplexity">'+a[29]+"</li>";n+='<li data-targetid="'+m+'" class="reset">'+a[30]+"</li>";n+="</ul>";o.after('<div class="password-actions" />');o.next(".password-actions").prepend(n).prepend('<img class="showpass inputImg" src="imgs/show.png" title="'+a[32]+'" data-targetid="'+m+'" />').prepend('<span class="passLevel passLevel-'+m+' fullround" title="'+a[31]+'"></span>');e(".quickGenPass").button({text:false,icons:{primary:"ui-icon-gear"}}).click(function(){j(11,true,true,m)}).next().button({text:false,icons:{primary:"ui-icon-key"}}).click(function(){var p=e(this).parent().next().show().position({my:"left top",at:"left bottom",of:this});e(document).one("click",function(){p.hide()});return false}).parent().buttonset().next().hide().menu();e(this).on("keyup",function(){g.checkPassLevel(e(this).val(),m)})});e(".passwordfield__input-show").each(function(){var n=e(this);var m=e(this).attr("id");n.after('<img class="showpass inputImg" src="imgs/show.png" title="'+a[32]+'" data-targetid="'+m+'" />')});e(".passGen").each(function(){e(this).on("click",function(){var m=e(this).data("targetid");j(11,true,true,m);e("#"+m).focus()})});e(".passComplexity").each(function(){e(this).on("click",function(){b()})});e(".showpass").each(function(){e(this).on("mouseover",function(){var m=e(this).data("targetid");e(this).attr("title",e("#"+m).val())})});e(".reset").each(function(){e(this).on("click",function(){var m=e(this).data("targetid");e("#"+m).val("");e("#"+m+"R").val("")})})};return{showLoading:c,hideLoading:l,activeTooltip:i,passwordDetect:d,password:j,init:function(){jQuery.extend(jQuery.fancybox.defaults,{type:"ajax",autoWidth:true,autoHeight:true,autoResize:true,autoCenter:true,fitToView:false,minHeight:50,padding:0,helpers:{overlay:{css:{background:"rgba(0, 0, 0, 0.1)"}}},keys:{close:[27]},afterShow:function(){e("#fancyContainer").find("input:visible:first").focus()}});jQuery.ajaxSetup({beforeSend:function(){c()},complete:function(){l();g.setContentSize();g.scrollUp();i()}});e(document).ready(function(){g.setContentSize();i()})},Common:g}}(jQuery);var sysPassUtil=sysPass.Util.Theme;sysPassUtil.init();